# LINE to Obsidian プラグイン テスト計画書

## 1. テスト環境

### 1.1 テスト環境構成
- Obsidian: バージョン 1.4.x 以上
- Firebase Project: LINE to Obsidian バックエンド
- LINE Developer アカウント: LINE Botの設定

### 1.2 テスト前準備
- Obsidianプラグインのビルド
  - `npm run build` コマンドでビルド済み
- プラグインファイルの配置
  - 以下のファイルをObsidian vaultの`.obsidian/plugins/line-to-obsidian/`に配置
    - main.js
    - manifest.json
    - styles.css
- プラグインの有効化
  - Obsidianの設定 → コミュニティプラグイン → インストール済み から「LINE to Obsidian」を有効化

## 2. テスト項目

### 2.1 基本機能テスト

#### 2.1.1 プラグイン設定
| No. | テスト項目 | 手順 | 期待結果 | 結果 |
|-----|------------|------|----------|------|
| 1-1 | 設定画面表示 | Obsidian設定からプラグイン設定を開く | 設定画面が表示される | □ |
| 1-2 | API Endpoint設定 | APIエンドポイントURLを入力して保存 | 設定が保存される | □ |
| 1-3 | Authentication Token設定 | 認証トークンを入力して保存 | 設定が保存される | □ |
| 1-4 | Sync Folder Path設定 | 同期先フォルダパスを入力して保存 | 設定が保存される | □ |

#### 2.1.2 同期機能
| No. | テスト項目 | 手順 | 期待結果 | 結果 |
|-----|------------|------|----------|------|
| 2-1 | 同期コマンド実行 | コマンドパレットから「Sync LINE Memos」を実行 | 同期処理が実行される | □ |
| 2-2 | リボンアイコン同期 | リボンアイコンをクリック | 同期処理が実行される | □ |
| 2-3 | 設定画面同期ボタン | 設定画面の「Sync Now」ボタンをクリック | 同期処理が実行される | □ |
| 2-4 | Last Sync表示 | 同期後に設定画面を確認 | 最終同期日時が表示される | □ |

### 2.2 エンドツーエンドテスト

#### 2.2.1 LINEメッセージ送信〜Obsidian同期
| No. | テスト項目 | 手順 | 期待結果 | 結果 |
|-----|------------|------|----------|------|
| 3-1 | LINE登録コマンド | LINEで「#登録」と送信 | Firestoreに登録情報が保存される | □ |
| 3-2 | LINEメモ送信 | LINEで通常メッセージを送信 | Firestoreにメモが保存される | □ |
| 3-3 | Obsidian同期 | 同期コマンドを実行 | LINEで送信したメモがObsidianに保存される | □ |
| 3-4 | ファイル名生成確認 | 同期されたファイルを確認 | 適切なファイル名でファイルが作成される | □ |
| 3-5 | コンテンツ確認 | 同期されたファイルを開く | LINEで送信した内容と一致する | □ |
| 3-6 | 重複メモ防止 | 同じメモを再度同期 | 新規ファイルが作成されず、既存ファイルが更新される | □ |
| 3-7 | メモ更新処理 | 更新された既存メモを同期 | 既存ファイルが更新される | □ |
| 3-8 | 同期状態表示 | 同期完了後の通知を確認 | 新規作成と更新の件数が正しく表示される | □ |

### 2.3 例外ハンドリングテスト

#### 2.3.1 エラー処理
| No. | テスト項目 | 手順 | 期待結果 | 結果 |
|-----|------------|------|----------|------|
| 4-1 | APIエンドポイント未設定 | APIエンドポイント未設定で同期実行 | エラーメッセージが表示される | □ |
| 4-2 | 認証トークン未設定 | 認証トークン未設定で同期実行 | エラーメッセージが表示される | □ |
| 4-3 | API接続エラー | 無効なAPIエンドポイントで同期実行 | 適切なエラーメッセージが表示される | □ |
| 4-4 | 認証エラー | 無効な認証トークンで同期実行 | 認証エラーメッセージが表示される | □ |
| 4-5 | 無効なパス | 無効な同期フォルダパスを設定 | エラーメッセージが表示される | □ |

### 2.4 境界値テスト

#### 2.4.1 特殊ケース
| No. | テスト項目 | 手順 | 期待結果 | 結果 |
|-----|------------|------|----------|------|
| 5-1 | 大量データ同期 | 多数のメモを同期 | すべてのメモが正常に同期される | □ |
| 5-2 | 長文メモ同期 | 非常に長いテキストメモを同期 | 完全な内容が同期される | □ |
| 5-3 | 特殊文字メモ | 特殊文字を含むメモを同期 | 文字化けせずに同期される | □ |
| 5-4 | 0件同期 | 同期対象がない状態で同期実行 | 適切なメッセージが表示される | □ |
| 5-5 | ID欠損メモ | IDがないメモを同期 | エラーログに記録され、処理がスキップされる | □ |
| 5-6 | 同期済みIDリスト | 大量の同期済みIDがある状態で同期 | パフォーマンスが低下せず正常に同期される | □ |

## 3. テスト結果記録

### 3.1 テスト実施日
- 日付: 

### 3.2 発見された問題
1. 
2. 

### 3.3 修正すべき課題
1. 
2. 

### 3.4 総合評価
- [ ] すべてのテストに合格
- [ ] 一部のテストに合格（重要な機能は動作）
- [ ] 重要な問題が検出された（修正が必要）

## 4. Obsidianプラグインインストール手順

### 4.1 手動インストール
1. ビルドされたプラグインファイル（main.js、manifest.json、styles.css）を取得
2. Obsidianの設定で「サードパーティプラグイン」を有効化
3. `.obsidian/plugins/line-to-obsidian/` ディレクトリを作成
4. プラグインファイルをディレクトリに配置
5. Obsidianを再起動
6. 設定からプラグインを有効化

### 4.2 設定手順
1. プラグイン設定画面を開く
2. 以下の項目を設定:
   - API Endpoint URL: FirebaseのCloud Functions URL
   - Authentication Token: 認証用トークン
   - Sync Folder Path: 同期先フォルダパス
3. 設定を保存

### 4.3 使用方法
1. LINEボットに「#登録」メッセージを送信して連携
2. LINEにテキストメモを送信
3. Obsidianでプラグインの同期機能を実行
4. 指定フォルダにLINEメモが同期される 