# その他

このドキュメントには、他のカテゴリに分類されない補足情報、メモ、検討事項などを記述します。

例:
- 将来的な拡張機能のアイデア
- 開発中に発生した問題とその解決策
- 参考にしたドキュメントや記事へのリンク

## トラブルシューティング

### レイテンシの問題

Firebase Functions V2へ移行した際に一時的なレイテンシの問題が発生することがあります。以下の対策で改善できます：

1. **メモリ設定の増加**
   - 関数のメモリ設定を増やすことでパフォーマンスが向上します
   - 例: `memory: '512MiB'`に設定

2. **コールドスタートの影響**
   - 初回または長時間未使用の関数呼び出し時にはコールドスタートが発生し、レスポンスが遅くなります
   - 定期的な呼び出しで関数を温かい状態に保つか、有料版ではminInstancesを設定できます

3. **一時的な問題**
   - Firebase Functionsのデプロイ直後や地域的な問題でレイテンシが発生することがあります
   - しばらく待つか、再デプロイすることで解決することがあります

### タイムゾーンの問題

Firebase FunctionsとObsidianプラグイン間でタイムゾーンの不一致が発生することがあります：

1. **問題の症状**
   - LINEメッセージ送信時間とObsidianノートのCreatedタイムスタンプに不一致がある
   - 例: 日本時間5/5 8:00に送信したメモが5/4 23:00として登録される（9時間の差）

2. **原因**
   - Firebase Functionsは標準でUTC時間を使用
   - クライアント側（Obsidian）はローカルタイムゾーン（日本ならJST）を使用

3. **解決策**
   - Firebase側: createdAtタイムスタンプにタイムゾーン情報を追加する
   - クライアント側: タイムスタンプを適切に変換してローカルタイムで表示する

4. **実装方法**
   - サーバー側（Firebase）でタイムスタンプをISO文字列として保存し、タイムゾーン情報を含める
   - クライアント側で`new Date()`使用時にタイムゾーンを考慮した変換を行う